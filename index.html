<!DOCTYPE html>
<html>
<head>
  <title>AR.js Example</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/1.7.2/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <a-scene embedded arjs>
    <a-assets>
      <a-asset-item id="3d-model" src="./house.glb"></a-asset-item>
      <video id="video" src="./videoforar.mp4" autoplay loop muted playsinline></video>
    </a-assets>
    <a-marker preset="hiro">
      <a-entity
        id="house-model"
        gltf-model="#3d-model"
        scale="1 1 1"
        rotation="270 0 0"
        position="-0.5 0 0"
      ></a-entity>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const houseModel = document.querySelector('#house-model');

      // Function to create small boxes around the house in a semi-circle
      function createBoxes() {
        const scene = document.querySelector('a-scene');
        const radius = 1.5; // Radius of the semi-circle
        const numBoxes = 5; // Number of boxes
        for (let i = 0; i < numBoxes; i++) {
          const angle = Math.PI * (i / (numBoxes - 1)); // Angle for semi-circle
          const x = radius * Math.cos(angle);
          const z = radius * Math.sin(angle);
          const smallBox = document.createElement('a-box');
          smallBox.setAttribute('position', { x: x, y: 0.5, z: z });
          smallBox.setAttribute('scale', '0.2 0.2 0.2');
          smallBox.setAttribute('color', 'orange');
          houseModel.appendChild(smallBox);
        }
      }

      // Create boxes after 10 seconds
      setTimeout(createBoxes, 10000);

      // Log messages to ensure the script runs correctly
      console.log('AR.js scene loaded');
    });

    // Check if the camera is being accessed
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(function(stream) {
        console.log('Camera access granted');
        stream.getTracks().forEach(track => track.stop()); // Stop the stream to avoid keeping the camera on
      })
      .catch(function(err) {
        console.error('Camera access denied:', err);
      });
  </script>
</body>
</html>
